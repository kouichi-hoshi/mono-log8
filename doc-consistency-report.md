# 整合性チェックレポート

**対象スコープ**: 全体（全フェーズ・全機能）  
**参照した一次資料**:
- `docs/01.要件定義書.md`
- `docs/02.仕様書.md`
- `docs/03.設計書.md`
- `docs/04.作業計画書.md`
- `docs/05.開発環境構築.md`
- `docs/06.テキスト・コンテンツ定義.md`

**チェック日時**: 2026-01-21

---

## 不整合一覧

| No | 分類 | 影響範囲 | 根拠（ファイル/要約） | 修正提案 | 要判断（質問） |
|---|------|----------|------------------------|----------|----------------|
| 1 | 欠落 | 運用ドキュメント参照 | `docs/05.開発環境構築.md` が `docs/07.運用手順（CI・デプロイ）.md` と `docs/vercel-neon-setup.md` を参照しているが、現状 `docs/` に存在しない（「後日作成予定」） | 参照を一時的に削除/別名に差し替え、または placeholder ファイルを作成して「未作成」明記 | 参照先はファイル追加予定でよいか（命名もこのままか） |
| 2 | 不一致 | ログイン中レイアウトの表現 | `docs/02.仕様書.md` では「ヘッダーは常に表示」「ログイン中はフッター非表示」だが、`docs/04.作業計画書.md` の `P1-TL-01` のタイトルが「ヘッダー/メイン/フッター非表示」と読める | `docs/04.作業計画書.md` のタイトルを「ヘッダー/メイン表示、フッター非表示」などに修正（意味を仕様書に合わせる） | タイトルの意図（「ログイン中はフッターだけ非表示」）で合っているか |
| 3 | 不一致（軽微） | ごみ箱URL例 | `docs/02.仕様書.md` の例に `/?view=trash` があるが、`docs/03.設計書.md` のURL正規化では `/?mode=all&view=trash` が canonical（ログイン中は `mode` を付与） | `docs/02.仕様書.md` の例を canonical 形式に寄せる、または「`/?view=trash` は入力としては許容するが正規化でリダイレクトされる」を追記 | 仕様書の例は「最終的な canonical」を採用する方針でよいか |
| 4 | 文言不整合 | 確認文の句読点/記号 | `docs/02.仕様書.md` の削除確認文が `?`（半角）で記載されている箇所がある一方、`docs/06.テキスト・コンテンツ定義.md` は `？`（全角）で統一されている | `docs/02.仕様書.md` の例文を `docs/06.テキスト・コンテンツ定義.md` に合わせて全角 `？` に統一 | 文言は `docs/06` を唯一の正として統一でよいか |
| 5 | 不一致 | 外部リンクの定義 | `docs/02.仕様書.md` は「GitHubアイコン: リポジトリへのリンク」「お問い合わせリンク」とするが、`docs/06.テキスト・コンテンツ定義.md` は GitHub をプロフィールURLにし「お問い合わせはボタンとして設置」としている | どちらを正とするか決めて `docs/02` / `docs/06` を合わせる（例: GitHubはリポジトリURL、問い合わせはリンクでもボタンでも意味が同じなら表現を統一） | GitHubは「リポジトリ」固定でよいか（プロフィールでよいか）／お問い合わせは「リンク」か「ボタン」か |
| 6 | 欠落 | UIラベルの一元定義 | `docs/02.仕様書.md` でボタン/リンク/タブのラベル（例: 「保存」「更新」「キャンセル」「Googleでログイン」「ログアウト」「すべて/メモ/ノート」など）を述べているが、`docs/06.テキスト・コンテンツ定義.md` には一部しか載っていない | `docs/06.テキスト・コンテンツ定義.md` に「ボタン/リンク/タブ ラベル」セクションを追加し、仕様書側は参照に寄せる | 文言は原則 `docs/06` に集約する方針でよいか |
| 7 | 欠落 | アカウント削除の計画 | `docs/01.要件定義書.md`「将来導入したい機能」に「アカウント削除」があるが、`docs/04.作業計画書.md` に対応するチェックリストIDが存在しない | `docs/04.作業計画書.md` の適切なフェーズにチェックリストID追加、または `docs/01` 側の「将来導入」項目から除外/別管理へ移す | 実装予定として計画に載せるか（今回はスコープ外か） |
| 8 | 未反映 | 投稿APIの暫定ガードの計画 | `docs/03.設計書.md`「投稿APIの暫定ガード（Auth.js 未実装期間）」が計画（チェックリスト）に落ちていない | `docs/04.作業計画書.md` にリスク項目としてID追加（例: `P1-RSK-02`）し、DoD と解除条件（P2-AUTH-01）を紐づける | このガードは実装必須か（設計上の注意だけでよいか） |
| 9 | ID不整合（軽微） | 連番欠落 | `docs/04.作業計画書.md` の P1-TL で `P1-TL-04` の次が `P1-TL-06` になっている | 意図的でなければ番号を詰める、意図的なら「欠番理由」を注記 | `P1-TL-05` は意図的な欠番か |

---

## 補足・その他の観察事項

### 対応済み（ユーザー指示反映）

- `docs/04.作業計画書.md` からタグ関連（`P2-TAG-01`, `P4-TAG-01`）を削除
- `docs/03.設計書.md` のスタブ有効化フラグ名を `USE_STUB_AUTH` に統一
- UI文言の表記ゆれ（個別ピックアップ）は `ui-text-variations-report.md` に分離

### 整合が取れている箇所

- チェックリストID（`P3-APP-01`, `P1-RSK-01`）の参照は設計書と作業計画書で一致している
- 成功/エラー文言の大枠（保存/更新/削除/復元/全件取得など）は `docs/02.仕様書.md` の想定と `docs/06.テキスト・コンテンツ定義.md` の用意が概ね一致している
- 外観変更機能は要件定義、設計書、作業計画書で整合している
- 検索機能、投稿エクスポート、投稿自動削除は要件定義と作業計画書で整合している

### 軽微な不一致（修正不要の可能性）

- 設計書の「スタブ／モック設計」セクションに「**ToDo:** 実装内容の詳細は別途検討する」という記載があるが、これは設計の未確定事項であり、不整合ではない

---

## 次のステップ

1. 上記の不整合について、ユーザーに判断を仰ぐ
2. 修正方針が確定したら、該当ドキュメントを最小差分で修正する
3. 修正後に再点検を実施し、矛盾が解消されたことを確認する
