---
name: docs-work-plan-from-docs
description: docs/ 配下の仕様・設計ドキュメントを読み、実装タスクを「作業計画書（Markdown表）」として整理して出力する。ユーザーが作業計画書、実装計画、タスク表、チェックリスト、進捗管理の表作成を求めたときに使う。
---

# docs → 作業計画書（表）生成

`docs/` 配下の仕様・設計・方針ドキュメントを入力として、実装タスクへ分解し、**作業計画書をMarkdownの表形式**で出力する。

## 目的

- `docs/` の内容を、実装可能な粒度のタスクへ落とし込む
- 進捗管理に使える「チェックリスト付きの表」を、機械的に更新しやすい形で出す

## 事前確認（安全ルール）

- `.env / .env.* / **/.env*` の中身は読まない・出力しない・コミットしない
- DBマイグレーション作成/適用、DBデータ更新（INSERT/UPDATE/DELETE）は行わない（計画書への記載は可）
- コード変更やドキュメント更新は、ユーザーが明示的に依頼した場合のみ行う（通常は「表の出力」まで）

## 使いどころ（トリガ）

以下の要望が来たらこの手順を使う。

- 「作業計画書を作って」「タスク表にして」「実装手順に分解して」
- 「docs を元に実装タスクを洗い出して」「進捗管理できる形にして」

## 手順

### 1) 対象ドキュメントを確定する

- 入口（索引）がある場合はそれを優先（例: `docs/03.設計書.v2.md`）
- 仕様（ユーザー視点）と設計（実装者視点）の両方があるなら、両方を読む
- UI/画面に関する記述が Miro 参照のみの場合:
  - docs上で確定している「UI基盤」「画面遷移」「エラー/通知」等だけをタスク化し、見た目詳細は「参照待ち」として別タスクにする

### 2) タスクへ分解する（粒度の基準）

- 1タスク = 0.5〜2日程度で完了できる最小単位を目安
- 依存関係がある場合は先に基盤/接続点/ガードを置く
- 1ドキュメント = 1タスクにしない（機能や観点で分割する）
- 同じ成果物を複数タスクで重複させない（例: env定義は1箇所に集約）

### 3) 進捗情報の初期値を付ける

原則、初期出力は以下で統一する。

- **チェックリスト**: `未`
- **進捗情報**: `未着手`

必要があれば、次の語彙で揃える。

- `未着手` / `進行中` / `レビュー中` / `完了` / `保留(理由: ...)` / `ブロック(理由: ...)`

### 4) 作業計画書を表形式で出力する（必須フォーマット）

最低限、次の列を含める。

- **項番**
- **チェックリスト（未/済）**
- **実装内容のタイトル**
- **実装内容**
- **進捗情報**

出力テンプレート（この列順のまま出す）:

```markdown
| 項番 | チェックリスト（未/済） | 実装内容のタイトル | 実装内容 | 進捗情報 |
|---:|:---:|---|---|---|
| 1 | 未 | 例: 環境変数の読み込み基盤 | 例: docs/03.v2/02_設定-環境変数-PWA.md を基に、env名・デフォルト・参照箇所を整理し、参照ポイントを1箇所に集約する | 未着手 |
```

### 5) 品質チェック（表の完成度）

- すべての行に「タイトル」「実装内容」が入っている
- 「実装内容」は“何を作るか/変えるか”がわかる（抽象語だけにしない）
- 依存の強い順（基盤→機能→仕上げ）に並んでいる
- 不確定要素は `保留` / `ブロック` と理由で明示されている

## 出力の注意

- ユーザーが「そのまま `docs/04.作業計画書.md` に書いて」と明示した場合のみ、ファイル更新を行う
- 表はコピー&ペーストで運用しやすいよう、1行1タスク・簡潔な文章でまとめる

