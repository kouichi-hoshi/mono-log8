---
title: 08.不足情報チェック3（実装観点・残タスク）
source:
author:
  -
published:
created: 2026-01-29
description:
tags:
---

# 目的

`docs/01.要件定義書.md` → `docs/02.仕様書.md` → `docs/03.設計書.md` を突き合わせ、実装に必要だが **未決・不足・矛盾** している情報を棚卸しする。

補足:
- 既存の `docs/08.不足情報チェック2.md` と重複しないよう、今回検出分のみを記載する。

# 対象

- 要件: `docs/01.要件定義書.md`
- 仕様: `docs/02.仕様書.md`
- 設計: `docs/03.設計書.md`

# 不足情報・矛盾一覧（優先度順）

| ID      | 修正状況  | 領域                  | 参照（現状）                                                | 不足/矛盾                                                   | 追記・修正の提案（決めること）                                                                 | 優先度    | メモ                | 修正結果                                                                                                                                                                             |
| ------- | ----- | ------------------- | ----------------------------------------------------- | ------------------------------------------------------- | ------------------------------------------------------------------------------- | ------ | ----------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| GAP-026 | - [済] | 認証（Google OAuth 設定） | 01: 「Googleアカウントによるログイン」 / 02: ログイン章 / 03: 認証=Auth.js | **OAuthの具体仕様が未定**（スコープ、コールバックURL、セッション保持項目、失効時挙動など）     | Google OAuth の設定一覧（必要スコープ、callback URL、Auth.js の provider 設定、セッションに載せる属性）を明記する。 | High   | 認証実装とテストの前提が決まらない | `docs/03.設計書.md` の「ログイン > 認証とセッション」に Google OAuth 設定表（scope / callback URL / provider / session payload / 失効時挙動）を追記                                                              |
| GAP-027 | - [済] | 認可（authorId の単一正）   | 03: 「Auth.js 未実装期間の暫定ガード」                             | **authorId の単一正が未決**（セッション由来のどの属性を使うか/どこで検証するか）         | Auth.js のセッションから採用するユーザー識別子と、認可チェック位置（Server Actions/Repository）を定義する。          | High   | 認可実装とデータ保護に直結     | `docs/03.設計書.md` の「ログイン > 認証とセッション（実装設計）」で `session.user.id=User.id` を authorId の単一正として明記し、同章に「認可（authorId の単一正）」を追記（Repository/Server Actions の責務、401/404/403 の扱い）。投稿章側は参照のみ残した |
| GAP-028 | - [済] | 投稿データ形式（memo/note）  | 02: メモは一行テキスト / 03: content は tiptap JSON             | **保存形式の整合が未定**（memo を JSON で保存するか、contentText 生成ルールが不明） | memo/note の保存形式、contentText 抽出方法、更新タイミング（作成/更新時）を設計に追記する。                       | High   | DB設計と一覧表示の前提が揺らぐ  | `docs/03.設計書.md` に「投稿本文の保存形式（tiptap JSON を正）」「contentText の生成・保存」を追記し、memo/note の保存形式、contentText 抽出ルール、生成タイミング（作成/更新の Server Action）を明記（`docs/03.設計書.md:672`, `docs/03.設計書.md:683`） |
| GAP-029 | - [済] | ごみ箱ビューの絞り込み条件       | 02/03: `view=trash` では UI 非表示、URL 値は保持                | **URL 値の扱いが未定**（サーバー取得条件として無視するのか、UI復帰時に復元するのか）         | `view=trash` 時の検索条件の扱い（完全無視/保持のみ/復帰時復元）を明記する。                                   | Medium | クエリキー/キャッシュ設計に影響  | `view=trash` 時は `tags` / `favorite` を一覧フィルタとして無視し（URL上の値は保持）、一覧は `status=trashed` を表示する方針を明記。通常復帰は `view=trash` を外すだけで、URLに残った値によりフィルタ状態が自動復帰する（`docs/03.設計書.md:218`, `docs/03.設計書.md:233`, `docs/03.設計書.md:246`） |
| GAP-030 | - [未] | 無限スクロールの取得仕様        | 02: 次の n 件取得 / 03: findMany I/F                       | **ページング詳細が不足**（limit 値、cursor 形式、終端判定、再試行方針が未定）         | limit の固定値、cursor の DTO 形式、終端判定の条件、エラー時の再試行導線を定義する。                             | Medium | 実装のAPI設計とテストに影響   | -                                                                                                                                                                                |
| GAP-031 | - [未] | リッチテキストの許可範囲        | 02: Markdown風ショートカットを許可                               | **対応範囲が未定**（tiptap extension、許可ノード/属性、リンク許可条件）          | MVPで許可する編集機能と extension 一覧、リンク/画像などの許可可否を明記する。                                  | Medium | 仕様逸脱やXSS対策の境界が曖昧  | -                                                                                                                                                                                |
| GAP-032 | - [未] | PWA 色設定             | 02/03: theme_color/background_color は暫定               | **確定値が未定**（デザイン確定後に更新とあるが最終値がない）                        | 初期リリースの確定値を決定し、manifest に反映する。                                                  | Low    | 実装は可能だが再修正が発生する   | -                                                                                                                                                                                |
| GAP-033 | - [未] | E2E テスト方針           | 03: Playwright 予定（詳細未定）                               | **具体シナリオ・環境が未定**（テスト範囲/前提データ/実行条件が不明）                   | MVP の必須シナリオ、環境（stg のみ等）、認証の扱いを決めてテスト計画に反映する。                                    | Low    | 品質担保の計画が立てづらい     | -                                                                                                                                                                                |
